<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<div class="row">
	<div class="col-sm-6 ">
		<div class="panel panel-default">
			<div class="alert alert-warning">
			  <h4 align="center">Novo Usuário</h4>
			</div>
			<div class="panel-body">
				<div class="col-md-10">
					<form ng-submit="submit()" name="userForm" novalidate>

						<div class="form-group"
							ng-class="{ 'has-error': userForm.name.$invalid && userForm.name.$dirty }">
							<label for="name">Nome:</label> <input type="text" required
								class="form-control" ng-model="appUser.name" id="name"
								name="name">
						</div>

						<div class="form-group"
							ng-class="{ 'has-error': userForm.username.$invalid && userForm.username.$dirty }">
							<label for="username">Nome de Usuário:</label> <input type="text"
								required class="form-control" ng-model="appUser.username"
								id="username" name="username">
						</div>

						<div class="form-group"
							ng-class="{ 'has-error': userForm.username.$invalid && userForm.username.$dirty }">
							<label for="role">Papel:</label> <select required
								multiple="multiple" class="form-control"
								ng-model="appUser.roles" id="role" name="role">
								<option value="ADMIN">Administrador</option>
								<option value="AGRICULTURA">Responsável Agricultura</option>
								<option value="ESPORTE">Responsável Esporte</option>
								<option value="RECEPCAO">Responsável Recepção</option>
								
							</select>
						</div>

						<div class="form-group"
							ng-class="{ 'has-error': userForm.password.$invalid && userForm.password.$dirty }">
							<label for="pwd">Senha:</label> <input type="password"
								required class="form-control" id="pwd"
								ng-model="appUser.password" name="password">
						</div>
						<button type="submit" class="btn btn-primary"
							ng-disabled="userForm.$invalid">{{buttonText}}</button>
					     
					    <button class="btn btn-warning" ng-disabled="userForm.$invalid">Cancelar</button> 		

						<div class="alert alert-info margin-top-5" ng-show="message">{{message}}</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<div class="col-sm-6">
		<div class="panel panel-default">
			<div class="alert alert-warning">
				<h4 align="center">Usuários Cadastrados</h4>
			</div>
			<div class="panel-body">

				<div class="alert alert-danger margin-top-5" ng-show="deleteMessage">{{deleteMessage}}</div>
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>#</th>
							<th>Nome</th>
							<th>Nome de Usuário</th>
							<th>Papel</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="user in users">
							<td>{{$index+1}}</td>
							<td>{{user.name}}</td>
							<td>{{user.username}}</td>
							<td><span ng-repeat="role in user.roles">{{role}}<span
									ng-if="$index < (user.roles.length-1)">,</span>
							</span></td>
							<td><button type="button" class="btn btn-warning btn-sm"
									ng-click="initEdit(user)">
									<span class="glyphicon glyphicon-edit"></span>
								</button></td>
							<td>
								<button type="button" class="btn btn-danger btn-sm"
								data-toggle="modal" data-target="#confirm">
									<span class="glyphicon glyphicon-trash"></span>
								</button>
							</td>
						</tr>
					</tbody>
				</table>
  <form>
     <div class="modal fade" id="confirm" role="dialog" tabindex="-1">
           <div class="modal-dialog modal-md">
                <div class="modal-content">
                   <div class="modal-body">
                       <p> Tem certeza que deseja excluir este registro ?</p>
                   </div>
                   <div class="modal-footer">
                      <button type="submit" class="btn btn-danger" ng-click="deleteUser(user)">Sim</button>
                      <button type="button" data-dismiss="modal" class="btn btn-warning">Não</button>
                   </div>
              </div>
           </div>
     </div>
     </form>
			</div>
		</div>
	</div>
</div>
